<!-- Container -->
<div class="kt-container-fixed">
  <div class="flex flex-wrap items-center lg:items-end justify-between gap-5 pb-7.5">
    <div class="flex flex-col justify-center gap-2">
      <h1 class="text-xl font-medium leading-none text-mono">
        Network Device Connection
      </h1>
      <div class="flex items-center gap-2 text-sm font-normal text-secondary-foreground">
        <%= @network_device.device.label %> â†” <%= @network_device.network.name %>
      </div>
    </div>
    <div class="flex items-center gap-2.5">
      <%= link_to edit_protected_network_device_path(@network_device), class: "kt-btn kt-btn-outline" do %>
        <i class="ki-filled ki-pencil"></i>
        Edit Connection
      <% end %>
    </div>
  </div>
</div>
<!-- End of Container -->

<!-- Container -->
<div class="kt-container-fixed">
  <div class="grid gap-5 lg:gap-7.5">
    <!-- Connection Details -->
    <div class="kt-card">
      <div class="kt-card-header">
        <h3 class="kt-card-title flex items-center gap-2">
          <i class="ki-filled ki-link text-lg"></i>
          Connection Details
        </h3>
      </div>
      <div class="kt-card-content">
        <div class="grid gap-4">
          <div class="flex items-center justify-between py-3 px-4 bg-accent/50 rounded-lg">
            <span class="text-sm font-medium text-secondary-foreground">Network</span>
            <span class="kt-badge kt-badge-primary"><%= @network_device.network.name %></span>
          </div>
          <div class="flex items-center justify-between py-3 px-4 bg-accent/50 rounded-lg">
            <span class="text-sm font-medium text-secondary-foreground">Device</span>
            <span class="kt-badge kt-badge-primary"><%= @network_device.device.label %></span>
          </div>
          <div class="flex items-center justify-between py-3 px-4 bg-accent/50 rounded-lg">
            <span class="text-sm font-medium text-secondary-foreground">Interface</span>
            <span class="text-sm text-foreground"><%= @network_device.device_interface&.name || 'N/A' %></span>
          </div>
          <div class="flex items-center justify-between py-3 px-4 bg-accent/50 rounded-lg">
            <span class="text-sm font-medium text-secondary-foreground">IP Address</span>
            <span class="text-sm text-mono bg-muted px-3 py-1 rounded"><%= @network_device.ip_address || 'N/A' %></span>
          </div>
          <div class="flex items-center justify-between py-3 px-4 bg-accent/50 rounded-lg">
            <span class="text-sm font-medium text-secondary-foreground">Status</span>
            <% if @network_device.connected? %>
              <span class="kt-badge kt-badge-success">Connected</span>
            <% else %>
              <span class="kt-badge kt-badge-destructive">Disconnected</span>
            <% end %>
          </div>
          <div class="flex items-center justify-between py-3 px-4 bg-accent/50 rounded-lg">
            <span class="text-sm font-medium text-secondary-foreground">Connected At</span>
            <span class="text-sm text-foreground"><%= @network_device.connected_at&.strftime('%B %d, %Y %H:%M') || 'N/A' %></span>
          </div>
          <div class="flex items-center justify-between py-3 px-4 bg-accent/50 rounded-lg">
            <span class="text-sm font-medium text-secondary-foreground">Disconnected At</span>
            <span class="text-sm text-foreground"><%= @network_device.disconnected_at&.strftime('%B %d, %Y %H:%M') || 'N/A' %></span>
          </div>
          <div class="flex items-center justify-between py-3 px-4 bg-accent/50 rounded-lg">
            <span class="text-sm font-medium text-secondary-foreground">Created</span>
            <span class="text-sm text-foreground"><%= @network_device.created_at.strftime('%B %d, %Y') %></span>
          </div>
          <div class="flex items-center justify-between py-3 px-4 bg-accent/50 rounded-lg">
            <span class="text-sm font-medium text-secondary-foreground">Last Updated</span>
            <span class="text-sm text-foreground"><%= @network_device.updated_at.strftime('%B %d, %Y') %></span>
          </div>
        </div>
      </div>
    </div>

    <!-- Network & Device Info -->
    <div class="grid gap-5 lg:gap-7.5">
      <!-- Network Info -->
      <div class="kt-card">
        <div class="kt-card-header">
          <h3 class="kt-card-title flex items-center gap-2">
            <i class="ki-filled ki-network text-lg"></i>
            Network Information
          </h3>
        </div>
        <div class="kt-card-content">
          <div class="grid gap-4">
            <div class="flex items-center justify-between py-3 px-4 bg-accent/50 rounded-lg">
              <span class="text-sm font-medium text-secondary-foreground">Type</span>
              <span class="text-sm text-foreground"><%= @network_device.network.kind.titleize %></span>
            </div>
            <div class="flex items-center justify-between py-3 px-4 bg-accent/50 rounded-lg">
              <span class="text-sm font-medium text-secondary-foreground">CIDR</span>
              <span class="text-sm text-mono"><%= @network_device.network.cidr || 'N/A' %></span>
            </div>
            <div class="flex items-center justify-between py-3 px-4 bg-accent/50 rounded-lg">
              <span class="text-sm font-medium text-secondary-foreground">Location</span>
              <span class="text-sm text-foreground"><%= @network_device.network.location || 'N/A' %></span>
            </div>
          </div>
        </div>
      </div>

      <!-- Device Info -->
      <div class="kt-card">
        <div class="kt-card-header">
          <h3 class="kt-card-title flex items-center gap-2">
            <i class="ki-filled ki-devices text-lg"></i>
            Device Information
          </h3>
        </div>
        <div class="kt-card-content">
          <div class="grid gap-4">
            <div class="flex items-center justify-between py-3 px-4 bg-accent/50 rounded-lg">
              <span class="text-sm font-medium text-secondary-foreground">Serial Number</span>
              <span class="text-sm text-mono"><%= @network_device.device.serial_number %></span>
            </div>
            <div class="flex items-center justify-between py-3 px-4 bg-accent/50 rounded-lg">
              <span class="text-sm font-medium text-secondary-foreground">Type</span>
              <span class="text-sm text-foreground"><%= @network_device.device.device_type.name %></span>
            </div>
            <div class="flex items-center justify-between py-3 px-4 bg-accent/50 rounded-lg">
              <span class="text-sm font-medium text-secondary-foreground">Status</span>
              <span class="text-sm text-foreground"><%= @network_device.device.status.titleize %></span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- End of Container -->

<!-- Container -->
<div class="kt-container-fixed">
  <!-- Recent Activities -->
  <div class="kt-card">
    <div class="kt-card-header">
      <h3 class="kt-card-title flex items-center gap-2">
        <i class="ki-filled ki-time-past text-lg"></i>
        Recent Activities
      </h3>
    </div>
    <div class="kt-card-content">
      <% if @network_activities.any? %>
        <div class="grid gap-4">
          <% @network_activities.each do |activity| %>
            <div class="flex items-center justify-between py-3 px-4 bg-accent/50 rounded-lg">
              <div class="flex items-center gap-4">
                <div class="flex-shrink-0">
                  <% case activity.event_type %>
                  <% when 'link_up' %>
                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                      <i class="ki-filled ki-check text-green-600"></i>
                    </div>
                  <% when 'link_down' %>
                    <div class="w-8 h-8 bg-destructive/10 rounded-full flex items-center justify-center">
                      <i class="ki-filled ki-cross text-destructive"></i>
                    </div>
                  <% else %>
                    <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                      <i class="ki-filled ki-information text-blue-600"></i>
                    </div>
                  <% end %>
                </div>
                <div>
                  <div class="text-sm font-medium text-foreground">
                    <%= activity.event_type.titleize %>
                  </div>
                  <div class="text-sm text-secondary-foreground">
                    <%= activity.recorded_at.strftime('%B %d, %Y %H:%M') %>
                  </div>
                </div>
              </div>
              <div>
                <%= link_to protected_network_activity_path(activity), class: "kt-btn kt-btn-sm kt-btn-outline" do %>
                  <i class="ki-filled ki-eye"></i>
                <% end %>
              </div>
            </div>
          <% end %>
        </div>
      <% else %>
        <div class="text-center py-8">
          <div class="flex flex-col items-center gap-4">
            <i class="ki-filled ki-time-past text-4xl text-muted-foreground"></i>
            <h3 class="text-lg font-medium text-foreground">No recent activities</h3>
            <p class="text-sm text-secondary-foreground">No network activities have been recorded for this connection yet.</p>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
<!-- End of Container -->

<!-- Container -->
<div class="kt-container-fixed">
  <div class="flex justify-center gap-4">
    <%= link_to protected_network_devices_path, class: "kt-btn kt-btn-outline" do %>
      <i class="ki-filled ki-arrow-left"></i>
      Back to Connections
    <% end %>

    <%= button_to protected_network_device_path(@network_device), method: :delete, data: { confirm: 'Are you sure you want to delete this network device connection?' }, class: "kt-btn kt-btn-destructive" do %>
      <i class="ki-filled ki-trash"></i>
      Delete Connection
    <% end %>
  </div>
</div>
<!-- End of Container -->