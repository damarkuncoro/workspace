<%# Template: index.html.erb %>
<%# Tujuan: Halaman index untuk daftar Issues nested pada <%= @parent_singular.capitalize %>. %>
<%# Catatan: Mengasumsikan controller menyediakan @<%= @parent_singular %> dan @issues. %>

<%= render 'protected/shared/partials/page_header',
  title: 'Customer Issues',
  subtitle: (@customer&.respond_to?(:person_name) ? @customer.person_name : 'Customer'),
  actions_html: (<%= link_to(new_protected_customer_issue_path(@customer), class: 'kt-btn kt-btn-primary') do %>
    <%= raw('<i class="ki-filled ki-plus"></i> New Issue') %>
  <% end %>) %>

<%= kt_card do %>
  <%= kt_card_content do %>
    <%= render partial: 'protected/issues/customers/partials/table',
      locals: {
        records: (@issues || @issues_customers || []),
        namespace: :protected,
        customer: @customer
      } %>
  <% end %>
<% end %>