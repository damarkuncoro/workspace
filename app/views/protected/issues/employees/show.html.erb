<h1>Issue Details</h1>

<div class="card">
  <div class="card-body">
    <h5 class="card-title"><%= @issue.title %></h5>
    <div class="row">
      <div class="col-md-6">
        <p><strong>Status:</strong>
          <span class="badge <%= @issue.open? ? 'bg-success' : @issue.in_progress? ? 'bg-warning' : 'bg-secondary' %>">
            <%= @issue.status&.humanize || 'Unknown' %>
          </span>
        </p>
        <p><strong>Priority:</strong>
          <span class="badge <%= @issue.high? ? 'bg-danger' : @issue.medium? ? 'bg-warning' : 'bg-info' %>">
            <%= @issue.priority&.humanize || 'Unknown' %>
          </span>
        </p>
        <p><strong>Primary Assigned To:</strong> <%= @issue.assigned_to&.person&.name || 'Unassigned' %></p>
        <% if @issue.assigned_accounts.any? %>
          <p><strong>Additional Assignees:</strong> <%= @issue.assigned_accounts.map { |account| account.person&.name }.compact.join(', ') %></p>
        <% end %>
      </div>
      <div class="col-md-6">
        <p><strong>Created At:</strong> <%= l(@issue.created_at) %></p>
        <p><strong>Updated At:</strong> <%= l(@issue.updated_at) %></p>
      </div>
    </div>
    <div class="mt-3">
      <strong>Description:</strong>
      <p><%= @issue.description || 'No description provided.' %></p>
    </div>
  </div>
</div>

<div class="mt-3">
  <%= link_to 'Edit Issue', edit_employee_issue_path(@employee, @issue), class: 'btn btn-warning' %>
  <%= link_to 'Back to Issues', employee_issues_path(@employee), class: 'btn btn-secondary' %>
  <%= link_to 'Back to Employee', protected_employee_path(@employee), class: 'btn btn-secondary' %>
</div>