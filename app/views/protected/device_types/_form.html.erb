<%#
  Partial: DeviceTypes Form (Unified)
  Tujuan: Satu partial form untuk halaman New/Edit DeviceType.
  Prinsip: DRY, SRP, KISS â€” menerima local `device_type` dan membuat `form_with` internal.
  Pemakaian:
    <%= render 'protected/device_types/form', device_type: @device_type %>
%>

<%= form_with(model: [:protected, device_type], local: true) do |form| %>
  <% if device_type.errors.any? %>
    <div class="bg-destructive/10 border border-destructive text-destructive px-4 py-3 rounded-lg">
      <div class="flex gap-3">
        <div class="flex-shrink-0">
          <i class="ki-filled ki-information text-destructive text-lg"></i>
        </div>
        <div>
          <h3 class="text-sm font-medium text-destructive">
            <%= pluralize(device_type.errors.count, "error") %> menghalangi penyimpanan tipe perangkat ini:
          </h3>
          <div class="mt-2 text-sm text-destructive">
            <ul role="list" class="list-disc pl-5 space-y-1">
              <% device_type.errors.each do |error| %>
                <li><%= error.full_message %></li>
              <% end %>
            </ul>
          </div>
        </div>
      </div>
    </div>
  <% end %>

  <div class="grid gap-6">
    <!-- Informasi Tipe Perangkat -->
    <div class="kt-card">
      <div class="kt-card-header">
        <h3 class="kt-card-title">Informasi Tipe Perangkat</h3>
      </div>
      <div class="kt-card-content">
        <%= kt_grid(cols: 1, gap: 4) do %>
          <div>
            <%= form.label :name, 'Nama Tipe', class: 'form-label' %>
            <%= form.text_field :name,
                class: 'kt-input',
                placeholder: 'Contoh: Laptop, Tablet, Smartphone',
                required: true %>
            <p class="mt-1 text-sm text-secondary-foreground">Masukkan nama kategori perangkat yang deskriptif</p>
          </div>

          <div>
            <%= form.label :description, 'Deskripsi', class: 'form-label' %>
            <%= form.text_area :description,
                rows: 4,
                class: 'kt-input',
                placeholder: 'Opsional: jelaskan karakteristik/ruang lingkup tipe perangkat ini' %>
            <p class="mt-1 text-sm text-secondary-foreground">Tambahkan detail bila diperlukan</p>
          </div>
        <% end %>
      </div>
    </div>
  </div>

  <!-- Aksi Form -->
  <%= kt_card_footer(justify: "justify-end", class_name: "gap-3") do %>
    <%= link_to protected_device_types_path, class: "kt-btn kt-btn-outline" do %>
      <i class="ki-filled ki-cross"></i>
      Batal
    <% end %>

    <%= form.submit (device_type.new_record? ? 'Buat Tipe' : 'Perbarui Tipe'),
        class: "kt-btn kt-btn-primary",
        data: { disable_with: device_type.new_record? ? "Menyimpan..." : "Memperbarui..." } %>
  <% end %>
<% end %>
