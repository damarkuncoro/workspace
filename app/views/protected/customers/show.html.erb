<%#
  View: Customers Show (Protected)
  Tujuan: Konsistensi desain dengan Accounts Show menggunakan KT helpers (kt_grid/kt_column) dan shared page_actions.
  Referensi: workspace/app/views/protected/accounts/show.html.erb
  Prinsip: DRY, SRP, KISS â€” wrapper layout menggunakan helper, konten via partials.
%>


  <!-- Header: unified -->
  <%= render 'protected/shared/partials/page_header',
              title: 'Customer Details',
              subtitle: @customer.person_name %>

  <%# Baris 1: Info + Quick Actions dalam grid 2 kolom %>
  <%= kt_grid(cols: 3) do %>
  <%= kt_column(span: 2) do %>
      <%= kt_card do %>
        <%= kt_card_header(title: 'Customer Info') %>
        <%= kt_card_content do %>
          <div class="flex flex-col gap-6">
            <%= render 'protected/customers/partials/basic_info', customer: @customer %>
            <%= render 'protected/customers/partials/account_details', customer: @customer %>
          </div>
        <% end %>
      <% end %>
    <% end %>

    <%= kt_column(span: 1) do %>
      <%= render 'protected/shared/partials/page_actions',
                  card: true,
                  title: 'Quick Actions',
                  justify: 'justify-start',
                  gap_class: 'gap-3',
                  links: [
                    link_to(edit_protected_customer_path(@customer), class: 'kt-btn kt-btn-warning') do
                      raw('<i class="ki-filled ki-pencil"></i> Edit Customer')
                    end,
                    link_to(protected_customers_path, class: 'kt-btn kt-btn-outline') do
                      raw('<i class="ki-filled ki-arrow-left"></i> Back to Customers')
                    end,
                    link_to(protected_dashboard_path, class: 'kt-btn kt-btn-outline') do
                      raw('<i class="ki-filled ki-home"></i> Back to Dashboard')
                    end
                  ] %>
    <% end %>
  <% end %>

  <%# Baris 2: Roles & Permissions (full width) %>
  <%= kt_grid(cols: 1) do %>
    <%= kt_column(span: 1) do %>
      <%= render 'protected/customers/partials/roles_permissions', customer: @customer %>
    <% end %>
  <% end %>

  <%# Baris 3: Device Rentals (full width) %>
  <%= kt_grid(cols: 1) do %>
  <%= kt_column(span: 1) do %>
      <%= render 'protected/customers/partials/device_rentals', customer: @customer %>
    <% end %>
  <% end %>

  <%# Baris 4: Support Issues (full width) %>
  <%= kt_grid(cols: 1) do %>
  <%= kt_column(span: 1) do %>
      <%= render 'protected/customers/partials/issues', customer: @customer %>
    <% end %>
  <% end %>

  <%# Recent Activity (Placeholder) dalam kt_card untuk konsistensi %>
  <%= kt_grid(cols: 1) do %>
  <%= kt_column(span: 1) do %>
      <%= kt_card do %>
        <%= kt_card_header(title: 'Recent Activity') %>
        <%= kt_card_content do %>
          <div class="text-center py-8">
            <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <h3 class="mt-2 text-sm font-medium text-gray-900">No recent activity</h3>
            <p class="mt-1 text-sm text-gray-500">Activity tracking will be available soon.</p>
          </div>
        <% end %>
      <% end %>
    <% end %>
  <% end %>

  <%# Action Buttons dihapus karena sudah tersedia di Quick Actions card %>
  
